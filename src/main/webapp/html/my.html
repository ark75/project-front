<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <meta name="description" content=""/>
    <title>RPG</title>
    <script src=https://code.jquery.com/jquery-3.6.0.min.js></script>
    <link href="/css/my.css" rel="stylesheet">
</head>
<body>
<h1>RPG admin panel</h1>
<h2>Accounts List</h2>
<div class="count">
    <h3>Count per page: </h3>
<form class="page-size">
<select  name="pageSize">
    <option selected value=3>3</option>
    <option  value=10 >10</option>
    <option value=20>20</option>
</select>
</form>
</div>
<table class="accountsList">
    <tbody class="rows">
    <tr>
        <td>#</td>
        <td>Name</td>
        <td>Title</td>
        <td>Race</td>
        <td>Profession</td>
        <td>Level</td>
        <td>Birthday</td>
        <td>Banned</td>
    </tr>
    </tbody>
</table>
<div class="paging-buttons">
    <span class="pages">Pages: </span>
</div>
<template class="account-template">
    <tr class="data-row">
        <td class="table__id"></td>
        <td class="table__name"></td>
        <td class="table__title"></td>
        <td class="table__race"></td>
        <td class="table__profession"></td>
        <td class="table__level"></td>
        <td class="table__birthday"></td>
        <td class="table__banned"></td>
    </tr>
</template>
<script type="module">

    import Account from "../css/Account.js";

    const baseurl = "rest/players";
    const playersCount = "rest/players/count";
    var pageSize = 0;
    var currentPageIndex = 0;
    var countAccounts = 0;
    var countPages = 0;

    function getAccounts() {
        $.get(baseurl, function (data) {
            data.forEach(item => {
                let row = new Account(item).generateRow();
                document.querySelector(".rows").append(row);
            })
        });
    }

    function getPlayers() {
        $.get(playersCount, function (data) {
            document.querySelector(".paging-buttons").textContent = data;
        });
    }


    getAccounts();
    getPlayers();


</script>

</body>
</html>